<!-- ================= LOGIN PAGE ONLY ================= -->

<div *ngIf="isLoginPage; else mainLayout">
  <router-outlet></router-outlet>
</div>

<ng-template #mainLayout>

  <!-- ================= MINI SIDE ICON BAR ================= -->

  <div class="mini-sidebar" [class.expanded]="isExpanded">

    <!-- <div class="mini-item">
      <span class="mini-icon">ğŸ“‹</span>
      <span class="mini-text">Audit Logs</span>
    </div> -->

    <div class="side-under-logo" [class.expanded]="isExpanded">

      <div class="side-item"
           title="Project Details"
           (click)="goToDashboard()">
        <span class="side-icon">ğŸ“‹</span>
        <span class="side-text">Project Details</span>
      </div>

      <div class="side-item"
           title="Users"
           (click)="openUsersSection()">
        <span class="side-icon">ğŸ‘¥</span>
        <span class="side-text">Users</span>
      </div>

      <div class="side-item"
           title="Logout"
           (click)="logout()">
        <span class="side-icon">ğŸšª</span>
        <span class="side-text">Logout</span>
      </div>

      <div class="side-expand" (click)="toggleSidebarExpand()">
        Â»
      </div>

    </div>

    <div class="mini-expand" (click)="toggleSidebarExpand()">
      <span *ngIf="!isExpanded">Â»</span>
      <span *ngIf="isExpanded">Â«</span>
    </div>

  </div>


  <!-- ================= HEADER ================= -->

  <header class="topbar">

    <div class="topbar-left-fixed">
      <div class="title-wrapper header-title">
        <img src="assets/icons/project-lens.png.jpg" class="project-icon" />
        <h1 class="app-title">PROJECT <span>LENS</span></h1>
      </div>
    </div>

    <div class="topbar-right">
      <span class="welcome-text">
        Welcome, {{ loggedInUsername }}
      </span>
      <button class="btn-logout" (click)="logout()">
        Logout
      </button>
    </div>

  </header>


  <!-- ================= SEARCH BAR ================= -->

  <div class="search-container-right">
    <div class="search-box">
      <input #searchInput
       type="text"
       placeholder="Search..."
       [(ngModel)]="searchText"
       (ngModelChange)="onSearchChange()" />

      <span class="search-icon"
            (click)="focusSearch(searchInput)">
        ğŸ”
      </span>
    </div>
  </div>


  <!-- ================= PAGE CONTENT ================= -->

  <div class="page-content">
    <router-outlet></router-outlet>
  </div>


  <!-- ================= GLOBAL PAGINATION ================= -->

  <div class="pagination-container"
       *ngIf="showPagination">

    <div class="pagination-left">
      <span>Items per page:</span>

      <select [(ngModel)]="itemsPerPage"
              (change)="onItemsPerPageChange()">
        <option *ngFor="let size of pageSizeOptions"
                [value]="size">
          {{ size }}
        </option>
      </select>
    </div>

    <div class="pagination-center">
      {{ pageStart + 1 }} - {{ displayEnd }} of {{ totalItems }}
    </div>

    <div class="pagination-right">
      <button (click)="goToFirst()" [disabled]="currentPage === 1">â®</button>
      <button (click)="prevPage()" [disabled]="currentPage === 1">â—€</button>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">â–¶</button>
      <button (click)="goToLast()" [disabled]="currentPage === totalPages">â­</button>
    </div>

  </div>

</ng-template>
